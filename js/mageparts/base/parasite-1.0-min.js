var Parasite=function(){var e={};var t=Object.prototype.toString;var n=function(e){return t.call(e)==="[object Array]"};var r=function(e){return typeof e!=="undefined"&&e!==null&&t.call(e)==="[object Object]"};var i=function(e,t){var n,r=e.length;var i=-1;for(n=0;n<r;++n){if(e[n]===t){i=n;break}}return i};var s=function(t){var n,r,i,s,o;var u=false;if(typeof t==="string"){u=true;n=t.split(".");r=e;s=n.length;for(i=0;i<s;++i){o=n[i];if(r.hasOwnProperty(o)){r=r[o]}else{u=false;break}}}return u};var o=function(e,t){var n=h(e);var r=c(e);r[n]=t};var u=function(e,t){var s,o,u=t.length;var a=r(e);var f=a?false:n(e);for(o=0;o<u;++o){if(a){s=e.hasOwnProperty(t[o])}else if(f){s=i(e,t[o])!==-1}if(s){break}}return s};var a=function(e,t,r){if(n(r)){t.init.apply(undefined,[e].concat(r))}else{t.init(e)}};var f=function(e,t,i){var s,o,u;if(typeof e==="function"&&r(t)){if(i!==undefined){if(r(i)){for(s in i){if(i.hasOwnProperty(s)&&t.hasOwnProperty(s)){e[s]=t[s]}}}else if(n(i)){o=i.length;for(s=0;s<o;++s){u=i[s];if(t.hasOwnProperty(u)){e[u]=t[u]}}}}else{for(s in t){if(t.hasOwnProperty(s)){e[s]=t[s]}}}}};var l=function(t){var n,r,i,s,o;var u=null;if(typeof t==="string"){s=p(t);o=e;for(n=0;n<r;++n){i=s[n];if(o.hasOwnProperty(i)){o=o[i]}}if(o!==e){u=o}}return u};var c=function(t){var n,r,i,s;var o=e;if(typeof t==="string"){s=p(t);r=s.length;for(n=0;n<r;++n){i=s[n];if(!o.hasOwnProperty(i)){o[i]={}}o=o[i]}}return o};var h=function(e){var t=null;if(typeof e==="string"){t=e.split(".").pop()}return t};var p=function(e){var t=[];if(typeof e==="string"){t=e.split(".");if(t.length>=2){t.pop()}else{t=[]}}return t};var d=function(e){var t=[];var s=e.name;var o=[s];var c=false;var h=function(e,p){var d;if(i(o,e)!==-1){throw new Error("$self: Looping inheritance in class: "+o[o.length-1]+", start: "+s)}if(c===false){if(typeof e==="string"){d=l(e);if(r(p)){if(p.hasOwnProperty("values")){if(n(p.values)){if(o.length===1){t=p.values;o.push(e);a(h,d,p.args)}else if(u(p.values,t)){o.push(e);a(h,d,p.args)}}}}else{o.push(e);a(h,d,p)}}else if(r(e)){if(o.length>1&&t.length>0){if(u(e,t)){f(h,e,t)}}else{f(h,e)}o.pop()}}if(o.length===1){t=[]}return h};e.init.apply(null,[h].concat(Array.prototype.slice.call(arguments,1)));c=true;return h};return{define:function(e,t){if(e.slice(-1)==="."){throw new Error("Parasite->define(): A class name {"+e+"} cannot end with a dot (.)")}if(s(e)){throw new Error("Parasite->define(): The class {"+e+"} already exits.")}if(typeof t.init!=="function"){throw new Error("Parasite->define(): Class has no constructor {init}, or {init} is not a function.")}o(e,t)},create:function(e){var t,n,r=l(e);if(r===null){throw new Error("Parasite->create(): Class is not defined.")}n=Array.prototype.slice.call(arguments,1);n.unshift(r);t=d.apply(null,n);return t}}}()